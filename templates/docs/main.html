{% extends "base.html" %}

{% block title %}STIPS Documentation{% endblock %}

{% block additionalscripts %}
<script>
	{% if anchor != '' %}
	$(function(){ window.location.hash = "{{anchor}}"; });
	{% endif %}
</script>
{% endblock %}

{% block content %}

<div class="center">
<h2>STIPS Documentation</h2>
</div>

<p>The following STIPS documentation pages are available:</p>
<ul>
	<li><a href="#overview">Overview</a>
		<ul>
			<li><a href="#overview_whyuse">Why use STIPS</a></li>
			<li><a href="#overview_limitations">STIPS Limitations</a></li>
		</ul></li>
	<li><a href="/docs/notes">STIPS Release Notes</a></li>
	<li><a href="/docs/interface">STIPS Interface</a></li>
	<li><a href="/docs/format">STIPS Catalogue Format</a></li>
	<li><a href="/docs/implementation">STIPS Implementation</a></li>
</ul>

<h3>Overview<span id="overview"></span></h3>

<p>STIPS is the Space Telescope Imaging Product Simulator. It is designed to create simulations of 
full-detector post-pipeline astronomical scenes for any telescope. Currently STIPS has modules for
WFC3 IR (F110W and F160W only), JWST (NIRCam Short, NIRCam Long, and MIRI), and WFIRST (WFI). STIPS
has the ability to add instrumental distortion (if available) as well as calibration residuals
(currently flatfield residuals, dark current residuals, and cosmic ray residuals). It automatically
includes Poisson noise and readout noise. It does not include instrument saturation effects. In
addition, STIPS has the ability to generate its own scenes, consisting of stellar populations and
background galaxies (implemented as Sersic profiles).</p>

<h4>Why use STIPS?<span id="overview_whyuse"></span></h4>

<p>STIPS is intended for cases where an ETC (e.g. Pandeia) does not provide enough detector area 
(e.g. testing photometry code, quick looks at dither patterns or multi-detector observations of a 
scene). For JWST and WFIRST, it obtains its background count levels and instrumental throughput 
levels from Pandeia internally, so it should produce output within 10% of output produced by 
Pandeia.</p>

<p>If extremely good instrumental accuracy is needed, STIPS is not the ideal choice. Instead, the
various instrument design teams have produced much more detailed simulators. STIPS is intended to
run reasonably quickly, and to make scene generation and observation as easy as possible. In 
addition, although STIPS is regularly tested to ensure that its count rates are within 10% of the
value produced by Pandeia for an equivalent source at the same magnitude, note that any internal
reviews will be done using Pandeia, so STIPS should not be used as a check on the feasibility of
particular observations with respect to count rate, and count rates measured by Pandeia should be
considered definitive if any differences are found.</p>

<h4>Limitations of STIPS<span id="overview_limitations"></span></h4>

<p>Whilst STIPS attempts to be as accurate as possible given its constraints, it is also necessary
to make tradeoffs in order to improve running time or simplify the simulation code. In particular,
the following intentional differences should be kept in mind:</p>

<ul>
	<li><strong>STIPS does not represent saturation</strong> STIPS currently does not implement 
		detector or ramp saturation. Pandeia does provide information about saturation, and in the
		case of bright sources Pandeia will provide a better indication of actual effects.</li>
	<li><strong>STIPS residuals are not taken from observational data</strong> Instead, residuals 
		are obtained from a combination of randomly generated data and fixed error files. Flatfield
		and dark residuals, in particular, will always be the same for a given detector</li>
	<li><strong>Sersic profiles do not cover the full detector</strong> In order to greatly improve
		the simulation speed, Sersic profiles, instead of extending to the edge of the detector, 
		extend only out to a given noise floor. This noise floor is either the sky background count
		rate (if specified), or the count rate which will produce 1 count on the detector for a 
		given exposure (0.001 counts/second for a default 1000-second exposure).</li>
	<li><strong>STIPS PSF does not extend to arbitrary distances from its centre</strong> The PSF
		generated via webbpsf is not accurate out to arbitrary distances. The overall PSF file is
		generated at the smallest size amongst the following:
		<ul>
			<li>The detector size</li>
			<li>2048 / oversample</li>
			<li> 30 * PHOTPLAM / (2 * detector scale)</li>
		</ul>
		As such, a very bright source may have its PSF wings cut off whilst still reasonably
		bright.</li>
	<li><strong>STIPS does not include contributions from off-detector sources</strong> The internal
		detector image generated by STIPS is the detector size (multiplied by the oversample), with
		the size of the PSF added on each side. Any source which does not fall on this expanded 
		detector image will not be added. As such, dither patterns (for example) may fail to have
		sources whose PSF would actually extend onto the detector.</li>
</ul>

{% endblock %}
{% block afterword %}
{% endblock %}
